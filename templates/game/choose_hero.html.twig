<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Choix du héros</title>
    <link rel="stylesheet" href="/css/choose_hero.css">
</head>

<body>
<a href="{{ path('app_menu_principal') }}" class="btn-back-to-menu">
    Retour au menu
</a>
{# CHANGEMENT ICI: La classe "title" devient "main-title" #}
<h1 class="main-title">Choisissez votre héro</h1>

<div class="selector">

    <button id="prev">⟨</button>

    <div class="hero-display">
        <img id="hero-image" src="{{ classes[0].image }}" alt="Héros">
        {# CHANGEMENT ICI: La balise h2 obtient la classe "hero-name" #}
        <h2 id="hero-name" class="hero-name">{{ classes[0].name }}</h2>
    </div>

    <button id="next">⟩</button>

</div>

<form action="{{ path('choose_hero_confirm') }}" method="POST" class="confirm-form">
    <input type="hidden" name="class_id" id="class-id" value="1">

    {# CHANGEMENT ICI: Le label est maintenant dans une balise <label> #}
    <label for="player_name">Nom du personnage :</label>
    <input type="text" name="player_name" id="player_name" required placeholder="Entrez votre nom"> {# Ajout du placeholder pour l'exemple #}

    <button type="submit" class="btn-start">Commencer l'aventure</button>
</form>


<script>
    const classes = {{ classes|json_encode|raw }};
    let index = 0;

    const img = document.getElementById("hero-image");
    const name = document.getElementById("hero-name");
    const classIdField = document.getElementById("class-id");

    // Assurez-vous que l'affichage initial correspond à la première classe
    function updateInitial() {
        if (classes.length > 0) {
            img.src = classes[0].image;
            name.textContent = classes[0].name;
            classIdField.value = classes[0].id;
        }
    }
    updateInitial(); // Appeler au chargement de la page

    document.getElementById("next").onclick = () => {
        index = (index + 1) % classes.length;
        update();
    };

    document.getElementById("prev").onclick = () => {
        index = (index - 1 + classes.length) % classes.length;
        update();
    };

    function update() {
        img.src = classes[index].image;
        name.textContent = classes[index].name;
        classIdField.value = classes[index].id;
    }
</script>

</body>
</html>