<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Choix du héros</title>
    <link rel="stylesheet" href="{{ asset('css/choose_hero.css') }}">
</head>

<body>

<a href="{{ path('app_menu_principal') }}" class="btn-back-to-menu">
    Retour au menu
</a>

{# NOUVEAU: Conteneur principal pour le contenu centré #}
<div class="main-content-wrapper">

    <h1 class="main-title">Choisissez votre héro</h1>

    <div class="hero-selection-area"> 
        <div class="selector">
            <button id="prev">⟨</button>
            <div class="hero-display">
                <img id="hero-image" src="{{ classes[0].image }}" alt="Héros">
                <h2 id="hero-name" class="hero-name">{{ classes[0].name }}</h2>
            </div>
            <button id="next">⟩</button>
        </div>

        <div class="stats-box">
            <h3>Statistiques</h3>
            <p>PV : <span id="stat-hp"></span></p>
            <p>Attaque : <span id="stat-attack"></span></p>
            <p>Défense : <span id="stat-defense"></span></p>
        </div>
    </div>

    <form action="{{ path('choose_hero_confirm') }}" method="POST" class="confirm-form">
        <input type="hidden" name="class_id" id="class-id" value="1">
        <label for="player_name">Nom du personnage :</label>
        <input type="text" name="player_name" id="player_name" required placeholder="Entrez votre nom">
        <button type="submit" class="btn-start">Commencer l'aventure</button>
    </form>

</div> {# FIN main-content-wrapper #}

<script>
    const classes = {{ classes|json_encode|raw }};
    let index = 0;

    const img = document.getElementById("hero-image");
    const name = document.getElementById("hero-name");
    const classIdField = document.getElementById("class-id");

    const statHp = document.getElementById("stat-hp");
    const statAttack = document.getElementById("stat-attack");
    const statDefense = document.getElementById("stat-defense");

    document.getElementById("next").onclick = () => {
        index = (index + 1) % classes.length;
        update();
    };

    document.getElementById("prev").onclick = () => {
        index = (index - 1 + classes.length) % classes.length;
        update();
    };

    function update() {
        img.src = classes[index].image;
        name.textContent = classes[index].name;
        classIdField.value = classes[index].id;

        statHp.textContent = classes[index].hp;
        statAttack.textContent = classes[index].attack;
        statDefense.textContent = classes[index].defense;
    }

    update();
</script>

</body>
</html>