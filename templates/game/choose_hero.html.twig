<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Choix du héros</title>
    <link rel="stylesheet" href="/css/choose_hero.css">
</head>

<body>

<h1 class="title">Choisissez votre héros</h1>

<div class="selector">

    <button id="prev">⟨</button>

    <div class="hero-display">
        <img id="hero-image" src="{{ classes[0].image }}" alt="Héros">
        <h2 id="hero-name">{{ classes[0].name }}</h2>
    </div>

    <button id="next">⟩</button>

</div>

<form action="{{ path('choose_hero_confirm') }}" method="POST" class="confirm-form">
    <input type="hidden" name="class_id" id="class-id" value="1">

    <label>Nom du personnage :</label>
    <input type="text" name="player_name" required>

    <button type="submit" class="btn-start">Commencer l'aventure</button>
</form>


<script>
    const classes = {{ classes|json_encode|raw }};
    let index = 0;

    const img = document.getElementById("hero-image");
    const name = document.getElementById("hero-name");
    const classIdField = document.getElementById("class-id");

    document.getElementById("next").onclick = () => {
        index = (index + 1) % classes.length;
        update();
    };

    document.getElementById("prev").onclick = () => {
        index = (index - 1 + classes.length) % classes.length;
        update();
    };

    function update() {
        img.src = classes[index].image;
        name.textContent = classes[index].name;
        classIdField.value = classes[index].id;
    }
</script>

</body>
</html>
